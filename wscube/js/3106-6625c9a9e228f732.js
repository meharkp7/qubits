"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3106],{5580:function(e,s,t){t.d(s,{Z:function(){return a}});var o=t(7437),l=t(6648);function a(){return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("footer",{className:"w-100 py-lg-70 py-30 rounded-tl-30 rounded-tr-30 text-center px-20",children:(0,o.jsx)(l.default,{src:"/images/user-profile/upskillingbharat.svg",width:546,height:62,alt:"#UpskillingBharat",className:"img-fluid user-select-none"})})})}t(2265)},6577:function(e,s,t){var o=t(7437),l=t(2514),a=t(8136);s.Z=function(e){let{setShowConfirmModal:s,isLoading:t,callBack:i,heading:r,description:n,buttonText:c}=e;return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(a.Z,{show:!0,centered:!0,size:"md",dialogClassName:"max-w-400 mx-auto",contentClassName:"max-w-400 mx-auto rounded-12",children:(0,o.jsx)(a.Z.Body,{className:"p-24",children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("h2",{className:"text-color-1 fs-18 fw-600 lh-28 mb-2",children:r}),(0,o.jsx)("p",{className:"text-color-6 fs-14 lh-21 fw-400 mb-32",children:n}),(0,o.jsxs)("div",{className:"d-flex align-items-center justify-content-center",children:[(0,o.jsx)("button",{disabled:t,onClick:()=>s(!1),className:"mr-5 text-color-7 fw-600 fs-16 bg-white shadow-none outline-none rounded-8 h-size-44 min-w-125 border-w border-color-38",children:"Cancel"}),(0,o.jsxs)("button",{onClick:i,disabled:t,className:"p-btn-disabled ml-5 text-color-2 fw-600 fs-16 bg-color-34 shadow-none outline-none rounded-8 h-size-44 min-w-125 border-w border-color-34",children:[t&&(0,o.jsx)(l.Z,{animation:"border",role:"status",size:"sm",className:"me-2"}),c]})]})]})})})})}},4220:function(e,s,t){t.d(s,{Z:function(){return N}});var o=t(7437),l=t(3670),a=t(6235),i=t(5088),r=t(4247),n=t(6648),c=t(2265),d=t(9754),m=t(5648),h=t(2514),u=t(8136),g=t(3580),p=t(6820),x=t.n(p),f=function(e){let{setShowSelfieModal:s,isCameraActive:t,setIsCameraActive:l,setProfileImage:a,setImagePreview:i,userName:r,setIsImageChanged:d,setIsFormChanged:m}=e,[h,g]=(0,c.useState)(!1),p=(0,c.useRef)(null);(0,c.useEffect)(()=>{var e,s;null===(s=navigator)||void 0===s||null===(e=s.mediaDevices)||void 0===e||e.getUserMedia({video:!0}).then(()=>g(!1)).catch(()=>g(!0))},[]);let f=(0,c.useCallback)(()=>{let e=p.current.getScreenshot(),s=Date.now(),t=((e,s)=>{let t=e.split(","),o=t[0].match(/:(.*?);/)[1],l=atob(t[1]),a=l.length,i=new Uint8Array(a);for(;a--;)i[a]=l.charCodeAt(a);return new File([i],s,{type:o})})(e,"".concat(r,"_selfie_").concat(s,".png"));i(URL.createObjectURL(t)),d(!0),m(!0),a(t)},[p]);return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(u.Z,{show:!0,centered:!0,backdrop:"static",keyboard:!1,size:"md",backdropClassName:"ws-modal-backdrop selfie-backdrop",className:"selfie-modal",children:(0,o.jsxs)(u.Z.Body,{className:"p-16",children:[(0,o.jsxs)("div",{className:"",children:[(0,o.jsx)("h4",{className:"fs-18 fw-600 text-color-1 lh-30",children:"Take a Selfie"}),(0,o.jsx)(n.default,{src:"https://deen3evddmddt.cloudfront.net/images/icons/close-modal.svg",width:24,height:24,alt:"Close",onClick:()=>{s(!1),l(!1)},title:"Close",className:"img-fluid cursor-pointer position-absolute close-modal"})]}),(0,o.jsx)("div",{className:"d-flex flex-column justify-content-center align-items-center py-4",children:h?(0,o.jsx)("div",{className:"text-center text-danger fs-14",children:(0,o.jsx)("p",{children:"Camera not available on this device. Please ensure you have a webcam connected."})}):t&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"position-relative w-size-200 h-size-200",children:(0,o.jsx)(x(),{audio:!1,height:200,ref:p,screenshotQuality:1,screenshotFormat:"image/png",width:200,style:{objectFit:"cover"},mirrored:!1,videoConstraints:{width:200,height:200,facingMode:"user"}})}),(0,o.jsx)("button",{onClick:()=>{f(),l(!1),s(!1)},type:"button",className:"btn-blue-disabled mt-4 px-18 hover-shadow-4 border-w border-color-3 min-w-128 rounded-8 h-size-40 outline-none text-white fw-700 fs-12 bg-color-8",children:"Take Photo"})]})})]})})})},w=t(5378);let b=e=>new Promise((s,t)=>{let o=new window.Image;o.crossOrigin="anonymous",o.src=e,o.onload=()=>s(o),o.onerror=s=>{console.error("Error loading image:",s),t(Error("Failed to load image: "+e))}}),j=async(e,s,t)=>{let o=await b(e),l=document.createElement("canvas"),a=l.getContext("2d"),i=o.naturalWidth/o.width,r=o.naturalHeight/o.height,n=s.width,c=s.height;return l.width=200,l.height=200,a.drawImage(o,s.x*i,s.y*r,n*i,c*r,0,0,200,200),new Promise(e=>{l.toBlob(s=>{e(URL.createObjectURL(s))},"image/jpeg",1)})};var v=function(e){let{setShowUploadModal:s,setProfileImage:t,profileImage:l,setImagePreview:i,imageSrc:r,setImageSrc:d}=e,[m,h]=(0,c.useState)({x:0,y:0}),[p,x]=(0,c.useState)(1),[f,b]=(0,c.useState)(null),v=(0,c.useCallback)((e,s)=>{b(s)},[]),N=async()=>{if(!f){g.Am.error("No area selected for cropping",a.D);return}try{let e=await j(r,f,p),o=await fetch(e),a=await o.blob(),n=new File([a],"".concat(String(null==l?void 0:l.lastModified),"profile-image.jpeg"),{type:"image/jpeg"});t(n),i(e),s(!1)}catch(e){console.error("Error during image cropping:",e),g.Am.error("Error cropping the image",a.D)}};return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(u.Z,{show:!0,centered:!0,backdrop:"static",keyboard:!1,size:"lg",backdropClassName:"ws-modal-backdrop selfie-backdrop",className:"selfie-modal",children:(0,o.jsxs)(u.Z.Body,{className:"p-16",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h4",{className:"fs-18 fw-600 text-color-1 lh-30",children:"Upload Photo"}),(0,o.jsx)(n.default,{src:"https://deen3evddmddt.cloudfront.net/images/icons/close-modal.svg",width:24,height:24,alt:"Close",onClick:()=>{s(!1),t(null),i(null)},title:"Close",className:"img-fluid cursor-pointer position-absolute close-modal"})]}),(0,o.jsxs)("div",{className:"d-flex flex-column justify-content-center align-items-center py-4 position-relative",children:[r&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"crop-container min-w-600 min-h-300 max-h-300 position-relative",children:(0,o.jsx)(w.ZP,{image:r,crop:m,zoom:p,aspect:1,onCropChange:h,onZoomChange:x,onCropComplete:v})}),(0,o.jsx)("p",{className:"mt-3 mb-0 fs-12 text-color-7",children:"(Scroll or Pinch to zoom image)"})]}),(0,o.jsx)("button",{onClick:()=>{N()},type:"button",disabled:!l,className:"btn-blue-disabled mt-4 px-18 hover-shadow-4 border-w border-color-3 min-w-128 rounded-8 h-size-40 outline-none text-white fw-700 fs-12 bg-color-8",children:"Save"})]})]})})})},N=function(e){let{setShowEditModal:s,progress:t}=e,[p,x]=(0,c.useState)(""),[w,b]=(0,c.useState)(""),[j,N]=(0,c.useState)(""),[y,C]=(0,c.useState)(!1),[k,S]=(0,c.useState)(!1),[Z,z]=(0,c.useState)(""),[I,F]=(0,c.useState)(!1),[P,_]=(0,c.useState)(!1),[U,A]=(0,c.useState)(!1),[D,E]=(0,c.useState)(!1),[R,T]=(0,c.useState)(null),[B,L]=(0,c.useState)(!1),{fetchUser:M,userDetails:H}=(0,l.a)();async function O(){if(I){L(!0);let e=await (0,r.cT)(p,"/profile");if(null==e?void 0:e.status){let e={profile_pic:"uploads/profile/"+(null==p?void 0:p.name),highlights:j},t=await (0,i.ek)(e);t.status?(L(!1),setTimeout(()=>{M()},1500),g.Am.success(t.message,a.D)):(L(!1),g.Am.error(t.message,a.D)),s(!1)}}else if(p){L(!0);let e=await (0,i.ek)({profile_pic:p,highlights:j});e.status?(L(!1),setTimeout(()=>{M()},1500),g.Am.success(e.message,a.D)):(L(!1),g.Am.error(e.message,a.D)),s(!1)}else z("Please select an image")}return(0,c.useEffect)(()=>{(null==H?void 0:H.profile_pic)&&x(null==H?void 0:H.profile_pic),(null==H?void 0:H.highlights)&&N(null==H?void 0:H.highlights)},[H,null==H?void 0:H.profile_pic]),(0,o.jsxs)(o.Fragment,{children:[U&&(0,o.jsx)(f,{setShowSelfieModal:A,isCameraActive:D,setIsCameraActive:E,setProfileImage:x,setImagePreview:b,userName:null==H?void 0:H.full_name,setIsImageChanged:F,setIsFormChanged:_}),k&&(0,o.jsx)(v,{setShowUploadModal:S,setProfileImage:x,profileImage:p,setImagePreview:b,imageSrc:R,setImageSrc:T}),(0,o.jsx)(u.Z,{show:!0,centered:!0,size:"xl",dialogClassName:"max-w-lg-628 mx-auto",contentClassName:"max-w-lg-628 mx-auto rounded-16",children:(0,o.jsxs)(u.Z.Body,{className:"p-lg-40 p-20",children:[(0,o.jsxs)("div",{className:"d-flex justify-content-between align-items-start mb-24",children:[(0,o.jsxs)("div",{className:"w-100",children:[(0,o.jsx)("h4",{className:"text-color-5 fw-600 fs-24 mb-2 line-clamp-1",children:null==H?void 0:H.full_name}),(0,o.jsxs)("p",{className:"text-color-30 fs-16 lh-24 mb-0",children:["Profile Completed ",t,"%"]}),(0,o.jsx)("div",{className:"w-100 mt-2",children:(0,o.jsx)(d.Z,{className:"h-size-8 edit-progress bg-color-13",now:t,visuallyHidden:!0})})]}),(0,o.jsx)(n.default,{src:"".concat("/","images/icons/cross-blue.svg"),width:18,height:18,alt:"Close",title:"Close",onClick:()=>{s(!1)},className:"img-fluid cursor-pointer"})]}),(0,o.jsxs)("div",{className:"my-40 mx-auto position-relative rounded-circle min-w-150 max-w-150 min-h-150 max-h-150",children:[w&&I?(0,o.jsx)(n.default,{src:w,width:150,height:150,alt:"user-img",style:{objectFit:"cover"},className:"img-fluid rounded-circle w-100 h-100 position-absolute start-0 end-0 mx-auto"}):(0,o.jsx)(n.default,{src:(null==H?void 0:H.profile_pic)&&"https://deen3evddmddt.cloudfront.net/"+(null==H?void 0:H.profile_pic)||"/images/icons/user-avatar.svg",width:150,height:150,alt:"user-img",style:{objectFit:"cover"},className:"img-fluid rounded-circle w-100 h-100 position-absolute start-0 end-0 mx-auto"}),(0,o.jsx)("div",{className:"user-dropdown profile-img-dropdown position-relative",style:{right:"-0.5rem",top:"100px"},children:(0,o.jsxs)(m.Z,{align:"end",children:[(0,o.jsx)(m.Z.Toggle,{variant:"none",id:"dropdown-basic",className:"border-0 outline-none w-max-content p-0 m-0 ms-auto d-block",children:(0,o.jsx)(n.default,{src:"".concat("/","images/icons/cam-icon-blue.svg"),width:48,height:48,alt:"user-img",title:"Choose image",className:"img-fluid cursor-pointer"})}),(0,o.jsxs)(m.Z.Menu,{className:"max-w-200 min-w-200 rounded-12 p-16",style:{marginTop:"0.25rem"},children:[(0,o.jsxs)(m.Z.Item,{className:"p-2 mb-1 cursor-pointer fs-15 text-color-10 position-relative",as:"span",children:[(0,o.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{let s=e.target.files[0];if(s){_(!0),F(!0);let e=new window.Image,t=new FileReader;t.onload=s=>{e.src=s.target.result},e.onload=()=>{if(s.size>3145728)z("Image must be less than 3MB."),x(""),b("");else{let e=URL.createObjectURL(s);z(""),S(!0),x(s),b(e),T(e)}},t.readAsDataURL(s)}else x(""),b("")},style:{zIndex:"10",opacity:"0"},className:"position-absolute top-0 left-0 opacity-0 w-100 h-100 cursor-pointer"}),"Upload Photo"]}),(0,o.jsx)(m.Z.Item,{onClick:()=>{A(!0),E(!0)},className:"p-2 mb-1 cursor-pointer fs-15 text-color-10 position-relative",as:"span",children:"Take a Selfie"})]})]})}),Z&&(0,o.jsx)("span",{className:"text-danger fs-13 position-absolute d-block text-nowrap text-center w-max-content",style:{bottom:"-1.5rem",left:"-1rem"},children:Z})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("p",{className:"mb-2 text-color-5 fw-600 fs-16",children:["Profile Highlights ",(0,o.jsx)("span",{className:"text-color-41",children:"*"})]}),(0,o.jsx)("p",{className:"mb-3 lh-22 text-color-30 fs-16",children:"List 4 key points you want to highlight on your profile and portfolio."}),(0,o.jsx)("div",{className:"users-input mb-3",children:(0,o.jsx)("input",{type:"text",placeholder:"Eg : Product | Growth | MDI Gurgaon | HBTU Kanpur",value:j,onChange:e=>{_(!0),N(e.target.value.trimStart().replace(/  +/g," "))},className:"form-control shadow-none outline-none fs-16 bg-white border-w border-color-28 rounded-8 h-size-40"})}),(0,o.jsx)("div",{className:"text-center",children:(0,o.jsxs)("button",{onClick:O,disabled:B||!P||!j,className:"btn-blue-disabled mt-4 px-18 hover-shadow-4 border-w border-color-3 min-w-128 rounded-8 h-size-40 outline-none text-white fw-700 fs-12 bg-color-8",children:[B&&(0,o.jsx)(h.Z,{animation:"border",role:"status",size:"sm",className:"me-2"}),"Save"]})})]})]})})]})}}}]);